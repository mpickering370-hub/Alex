<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>For My Love üíó</title>
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@600&display=swap" rel="stylesheet">
  
  <style>
    * { box-sizing: border-box; font-family: "Helvetica Neue", sans-serif; touch-action: none; }
    body { margin: 0; height: 100vh; background: #ffd6e8; display: flex; justify-content: center; align-items: center; overflow: hidden; position: relative; }

    /* Floating Hearts */
    .bg-heart { position: absolute; color: rgba(255, 105, 180, 0.4); font-size: 22px; user-select: none; pointer-events: none; animation: floatUp 6s linear infinite; z-index: 0; }
    @keyframes floatUp { 0% { transform: translateY(100vh) rotate(0deg); opacity: 1; } 100% { transform: translateY(-10vh) rotate(360deg); opacity: 0; } }

    .page { display: none; text-align: center; width: 100%; height: 100%; flex-direction: column; justify-content: center; align-items: center; padding: 20px; animation: fadeIn 0.6s ease-in; position: absolute; z-index: 1; }
    .active { display: flex; }

    /* Photo Frames & Carousel */
    .photo-frame { background: white; padding: 10px; border-radius: 10px; box-shadow: 0 10px 20px rgba(0,0,0,0.15); margin-bottom: 15px; }
    .photo-frame img { width: 220px; display: block; border-radius: 5px; }

    .carousel-container { 
      width: 280px; height: 350px; background: white; padding: 10px; 
      border-radius: 10px; box-shadow: 0 10px 25px rgba(0,0,0,0.2); 
      position: relative; overflow: hidden; margin-bottom: 20px;
    }
    .carousel-slide { 
      display: none; width: 100%; height: 100%; 
      object-fit: cover; border-radius: 5px; animation: fadeEffect 0.8s;
    }
    @keyframes fadeEffect { from {opacity: 0.4} to {opacity: 1} }

    /* UI Elements */
    #passcode { width: 240px; padding: 15px; font-size: 1.5rem; text-align: center; border-radius: 12px; border: 3px solid #ffb3d1; margin-bottom: 25px; background: white; letter-spacing: 2px; }
    #passcode::placeholder { color: #d3d3d3; letter-spacing: 2px; font-size: 1.2rem; }
    .keypad { display: grid; grid-template-columns: repeat(3, 75px); gap: 15px; }
    .key { height: 75px; border-radius: 50%; border: none; background: white; font-size: 1.4rem; box-shadow: 0 4px 10px rgba(0,0,0,0.1); cursor: pointer; }
    .key:active { background: #fef1f6; transform: scale(0.95); }
    .enter { background: #ff5fa2; color: white; font-weight: bold; }
    .nav-btn { margin-top: 25px; padding: 12px 25px; border-radius: 25px; border: none; background: white; color: #ff576c; font-weight: bold; cursor: pointer; box-shadow: 0 4px 15px rgba(0,0,0,0.1); }

    /* Scratch-Off */
    .scratch-container { position: relative; width: 300px; height: 160px; margin-top: 20px; border: 4px solid #ffb3d1; border-radius: 15px; overflow: hidden; background: white; }
    #scratchCanvas { position: absolute; top: 0; left: 0; z-index: 2; }
    .secret-message { position: absolute; width: 100%; height: 100%; display: flex; flex-direction: column; justify-content: center; align-items: center; z-index: 1; }
    .secret-bg { width: 100%; height: 100%; object-fit: cover; position: absolute; opacity: 0.3; }

    /* Envelope & Letter */
    .envelope-container { position: relative; width: 250px; height: 180px; background: #fdfcf0; border-radius: 5px; box-shadow: 0 10px 30px rgba(0,0,0,0.15); cursor: pointer; }
    .flap { position: absolute; top: 0; width: 0; height: 0; border-left: 125px solid transparent; border-right: 125px solid transparent; border-top: 100px solid #ebe8d0; transform-origin: top; transition: 0.6s; z-index: 4; }
    .envelope-container.open .flap { transform: rotateX(180deg); z-index: 1; }
    .envelope-front { position: absolute; bottom: 0; width: 0; height: 0; border-left: 125px solid #f5f3e0; border-right: 125px solid #f5f3e0; border-bottom: 90px solid #f5f3e0; z-index: 3; }
    .letter-paper { position: absolute; bottom: 10px; width: 220px; height: 150px; background: white; transition: 0.8s ease; z-index: 2; padding: 25px; box-shadow: 0 0 10px rgba(0,0,0,0.1); overflow-y: auto; }
    .letter-paper.fullscreen { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 85vw; height: 70vh; z-index: 100; box-shadow: 0 0 50px rgba(0,0,0,0.3); border-radius: 10px; }
    .letter-content { font-family: 'Dancing Script', cursive; font-size: 1.3rem; color: #444; opacity: 0; transition: 0.5s; text-align: left; line-height: 1.6; }
    .letter-paper.fullscreen .letter-content { opacity: 1; }

    @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
  </style>
</head>
<body>

<audio id="bgMusic" loop><source src="music.mp3" type="audio/mpeg"></audio>

<div class="page active" id="startPage">
  <div class="photo-frame"><img src="start.jpeg"></div>
  <h1 style="color: #ff5fa2; font-family: 'Dancing Script', cursive; font-size: 2.5rem;">For My Love...</h1>
  <button class="nav-btn" style="font-size: 1.2rem; padding: 15px 40px;" onclick="startExperience()">Open Your Gift ‚ù§Ô∏è</button>
</div>

<div class="page" id="page1">
  <div style="color:#e63946; font-weight:600; margin-bottom:15px; font-size: 1.4rem;">Enter an important date my love ‚ù§Ô∏è</div>
  <input type="password" id="passcode" maxlength="8" disabled placeholder="MMDDYYYY" />
  <div class="keypad">
    <button class="key" onclick="handleInput('1')">1</button><button class="key" onclick="handleInput('2')">2</button><button class="key" onclick="handleInput('3')">3</button>
    <button class="key" onclick="handleInput('4')">4</button><button class="key" onclick="handleInput('5')">5</button><button class="key" onclick="handleInput('6')">6</button>
    <button class="key" onclick="handleInput('7')">7</button><button class="key" onclick="handleInput('8')">8</button><button class="key" onclick="handleInput('9')">9</button>
    <button class="key" onclick="backspace()">‚å´</button><button class="key" onclick="handleInput('0')">0</button><button class="key enter" onclick="checkPasscode()">OK</button>
  </div>
</div>

<div class="page" id="page2">
  <div class="photo-frame"><img src="us.jpeg"></div>
  <h2>Days we've spent together üíû</h2>
  <div style="font-size:4.5rem; font-weight:bold;" id="dayCounter">0</div>
  <button class="nav-btn" onclick="showPage('page3')">Next Surprise ‚Üí</button>
</div>

<div class="page" id="page3">
  <div class="photo-frame" style="transform: rotate(-2deg);"><img src="us2.jpeg"></div>
  <h1>I'll See You SO Soon Honey ‚ù§Ô∏è‚ù§Ô∏è</h1>
  <div style="display:flex; gap:10px; margin:20px 0;">
    <div style="background:rgba(255,255,255,0.2); padding:10px; border-radius:10px; min-width:65px;"><span id="cd-days">00</span><br><small>Days</small></div>
    <div style="background:rgba(255,255,255,0.2); padding:10px; border-radius:10px; min-width:65px;"><span id="cd-hours">00</span><br><small>Hrs</small></div>
    <div style="background:rgba(255,255,255,0.2); padding:10px; border-radius:10px; min-width:65px;"><span id="cd-mins">00</span><br><small>Min</small></div>
    <div style="background:rgba(255,255,255,0.2); padding:10px; border-radius:10px; min-width:65px;"><span id="cd-secs">00</span><br><small>Sec</small></div>
  </div>
  <button class="nav-btn" onclick="initScratch(); showPage('page4')">The Final Gift ‚Üí</button>
</div>

<div class="page" id="page4">
  <h2 id="swipeText">Swipe to reveal... ‚ú®</h2>
  <div class="scratch-container">
    <div class="secret-message">
       <img src="valentine.jpeg" class="secret-bg">
       <span style="position:relative; z-index:2; font-weight:bold; font-size:1.3rem; padding:10px;">Alex, Will You Be My Valentine? üåπ</span>
    </div>
    <canvas id="scratchCanvas" width="300" height="160"></canvas>
  </div>
  <div id="valBtns" style="display:none; gap:20px; margin-top:30px;">
    <button onclick="celebrate()" style="background:#4CAF50; color:white; padding:15px 30px; border-radius:30px; border:none; font-weight:bold; cursor:pointer;">Yes ‚ù§Ô∏è</button>
    <button onclick="celebrate()" style="background:#f44336; color:white; padding:15px 30px; border-radius:30px; border:none; font-weight:bold; cursor:pointer;">Not No</button>
  </div>
</div>

<div class="page" id="page5">
  <div class="carousel-container">
    <img src="slide1.JPG" class="carousel-slide">
    <img src="slide2.JPG" class="carousel-slide">
    <img src="slide3.JPG" class="carousel-slide">
    <img src="slide4.jpeg" class="carousel-slide">
    <img src="slide5.jpeg" class="carousel-slide">
    <img src="slide6.jpeg" class="carousel-slide">
    <img src="slide7.jpeg" class="carousel-slide">
  </div>
  <h1 style="font-size: 2.2rem; padding: 0 10px;">YAYAYAYAY You Make Me SO Happy Honey üíñ</h1>
  <div id="lastThingContainer" style="margin-top:25px;">
    <p id="waitMsg" style="color:white; font-style:italic; opacity:0.7;">Wait for it... ‚ú®</p>
    <button id="finalBtn" class="nav-btn" style="display:none; margin-top:0;" onclick="showPage('page6')">One last thing... üíå</button>
  </div>
</div>

<div class="page" id="page6">
  <h2 id="envelopeHint" style="color:#ff5fa2; margin-bottom: 20px;">Tap to open your letter...</h2>
  <div class="envelope-container" id="envContainer" onclick="handleEnvelope()">
    <div class="flap"></div>
    <div class="letter-paper" id="letterPaper">
      <div class="letter-content" id="letterText">
        My Dearest Alex,<br><br>
        I love you so much! Happy anniversary honey. I know this isn't how we'd like to spend our anniversary or especially our first valentines day but this is the first of so many. All of this will be worth it in the end, and there is no one I'd rather be doing the distance with. 
        I'm so excited for my visit. It's going to be so amazing. I genuinely think about it every single day. You're the best thing to ever happen to me and I am so grateful to have you in my life. <br><br>
        "The distance means nothing when someone means everything!"<br><br>
        I love you Forever & Always,<br>
        -Matthew  ‚ù§Ô∏è<br> 
      </div>
    </div>
    <div class="envelope-front"></div>
  </div>
</div>

<script>
  const correctPasscode = "10022025"; 
  let enteredCode = "";
  const bgMusic = document.getElementById("bgMusic");
  let carouselActive = false;

  function createHearts() {
    // Increased heart count for start page
    for (let i = 0; i < 40; i++) {
      let heart = document.createElement("div");
      heart.className = "bg-heart"; heart.innerHTML = "‚ù§Ô∏è";
      heart.style.left = Math.random() * 100 + "vw";
      heart.style.animationDelay = Math.random() * 8 + "s";
      document.body.appendChild(heart);
    }
  }
  createHearts();

  function startExperience() {
    bgMusic.play().catch(e => console.log("Audio play blocked"));
    showPage('page1');
  }

  let slideIndex = 0;
  function runCarousel() {
    if(!carouselActive) return;
    let slides = document.getElementsByClassName("carousel-slide");
    for (let i = 0; i < slides.length; i++) { slides[i].style.display = "none"; }
    slideIndex++;
    if (slideIndex > slides.length) {slideIndex = 1}
    slides[slideIndex-1].style.display = "block";
    setTimeout(runCarousel, 2000);
  }

  function handleInput(num) { 
    if (enteredCode.length < 8) { 
      enteredCode += num; 
      document.getElementById("passcode").value = enteredCode; 
    } 
  }
  function backspace() { enteredCode = enteredCode.slice(0, -1); document.getElementById("passcode").value = enteredCode; }
  
  function checkPasscode() {
    if (enteredCode === correctPasscode) { showPage('page2'); calculateDays(); startCountdown(); } 
    else { document.getElementById("passcode").style.borderColor = "red"; setTimeout(()=>document.getElementById("passcode").style.borderColor="#ffb3d1", 500); }
  }

  function showPage(id) { 
    document.querySelectorAll('.page').forEach(p => p.classList.remove('active')); 
    document.getElementById(id).classList.add('active'); 
    
    if(id === 'page5' && !carouselActive) {
        carouselActive = true;
        runCarousel();
        setTimeout(() => {
          document.getElementById("waitMsg").style.display = "none";
          document.getElementById("finalBtn").style.display = "inline-block";
        }, 5000); 
    }
  }

  function calculateDays() {
    const start = new Date("2025-10-02");
    document.getElementById("dayCounter").innerText = Math.floor((new Date() - start) / (1000*60*60*24));
  }

  function startCountdown() {
    const target = new Date("March 8, 2026 03:30:00 EST").getTime();
    setInterval(() => {
      const dist = target - new Date().getTime();
      document.getElementById("cd-days").innerText = Math.max(0, Math.floor(dist / (1000*60*60*24)));
      document.getElementById("cd-hours").innerText = Math.max(0, Math.floor((dist % (1000*60*60*24)) / (1000*60*60)));
      document.getElementById("cd-mins").innerText = Math.max(0, Math.floor((dist % (1000*60*60)) / (1000*60)));
      document.getElementById("cd-secs").innerText = Math.max(0, Math.floor((dist % (1000*60)) / 1000));
    }, 1000);
  }

  function initScratch() {
    const canvas = document.getElementById("scratchCanvas");
    const ctx = canvas.getContext("2d");
    ctx.fillStyle = "#ffb3d1"; ctx.fillRect(0, 0, canvas.width, canvas.height);
    let isDrawing = false;
    const scratch = (e) => {
      if (!isDrawing) return;
      const rect = canvas.getBoundingClientRect();
      const x = (e.pageX || (e.touches ? e.touches[0].pageX : 0)) - rect.left;
      const y = (e.pageY || (e.touches ? e.touches[0].pageY : 0)) - rect.top;
      ctx.globalCompositeOperation = 'destination-out';
      ctx.beginPath(); ctx.arc(x, y, 25, 0, Math.PI * 2); ctx.fill();
      document.getElementById("valBtns").style.display = "flex";
    };
    canvas.addEventListener("mousedown", () => isDrawing = true);
    canvas.addEventListener("touchstart", () => isDrawing = true);
    window.addEventListener("mouseup", () => isDrawing = false);
    window.addEventListener("touchend", () => isDrawing = false);
    canvas.addEventListener("mousemove", scratch);
    canvas.addEventListener("touchmove", scratch);
  }

  function celebrate() {
    confetti({ particleCount: 150, spread: 70, origin: { y: 0.6 } });
    setTimeout(() => { showPage('page5'); }, 1000);
  }

  let envStep = 0;
  function handleEnvelope() {
    const env = document.getElementById("envContainer");
    const paper = document.getElementById("letterPaper");
    const hint = document.getElementById("envelopeHint");
    if (envStep === 0) {
      env.classList.add("open");
      hint.innerText = "Now tap the letter...";
      envStep = 1;
    } else if (envStep === 1) {
      paper.classList.add("fullscreen");
      hint.style.display = "none";
      envStep = 2;
    }
  }
</script>
</body>
</html>
